<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§»åŠ¨ç«¯å¸ƒå±€éªŒè¯å·¥å…·</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            background: #f1f5f9;
        }
        
        .validator-container {
            display: flex;
            height: 100vh;
        }
        
        .validator-panel {
            width: 300px;
            background: white;
            border-right: 2px solid #25D366;
            overflow-y: auto;
            padding: 20px;
        }
        
        .validator-title {
            color: #128C7E;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .test-section {
            margin-bottom: 25px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 10px;
            border-left: 4px solid #25D366;
        }
        
        .section-title {
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        .device-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .device-btn {
            padding: 10px 12px;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
            text-align: left;
        }
        
        .device-btn.active {
            background: #25D366;
            color: white;
            border-color: #25D366;
        }
        
        .device-btn:hover {
            border-color: #25D366;
        }
        
        .test-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .test-btn {
            padding: 10px 12px;
            background: #25D366;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .test-btn:hover {
            background: #128C7E;
        }
        
        .test-btn.secondary {
            background: #64748b;
        }
        
        .test-btn.secondary:hover {
            background: #475569;
        }
        
        .results-area {
            margin-top: 15px;
            padding: 12px;
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 6px;
            font-size: 12px;
            color: #15803d;
            display: none;
        }
        
        .results-area.error {
            background: #fef2f2;
            border-color: #fecaca;
            color: #dc2626;
        }
        
        .iframe-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .device-frame {
            background: #1a1a1a;
            padding: 10px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .device-screen {
            background: white;
            border-radius: 15px;
            overflow: hidden;
        }
        
        .test-iframe {
            border: none;
            display: block;
        }
        
        .device-info {
            text-align: center;
            color: white;
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .layout-issues {
            list-style: none;
            padding: 0;
            margin: 10px 0;
        }
        
        .layout-issues li {
            padding: 6px 0;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .issue-fixed::before {
            content: 'âœ…';
        }
        
        .issue-warning::before {
            content: 'âš ï¸';
        }
        
        .issue-error::before {
            content: 'âŒ';
        }
    </style>
</head>
<body>
    <div class="validator-container">
        <div class="validator-panel">
            <div class="validator-title">ğŸ“± ç§»åŠ¨ç«¯å¸ƒå±€éªŒè¯</div>
            
            <div class="test-section">
                <div class="section-title">è®¾å¤‡åˆ‡æ¢æµ‹è¯•</div>
                <div class="device-list">
                    <button class="device-btn active" onclick="testDevice('iphone-se', 320, 568)">
                        iPhone SE (320Ã—568)
                    </button>
                    <button class="device-btn" onclick="testDevice('iphone-12', 390, 844)">
                        iPhone 12 (390Ã—844)
                    </button>
                    <button class="device-btn" onclick="testDevice('iphone-13-pro', 393, 852)">
                        iPhone 13 Pro (393Ã—852)  
                    </button>
                    <button class="device-btn" onclick="testDevice('galaxy-s21', 384, 854)">
                        Galaxy S21 (384Ã—854)
                    </button>
                    <button class="device-btn" onclick="testDevice('pixel-7', 412, 915)">
                        Pixel 7 (412Ã—915)
                    </button>
                </div>
            </div>
            
            <div class="test-section">
                <div class="section-title">å¸ƒå±€é—®é¢˜æ£€æµ‹</div>
                <ul class="layout-issues" id="layoutIssues">
                    <li class="issue-fixed">CTAåŒºåŸŸé—´è·ä¿®å¤ âœ“</li>
                    <li class="issue-fixed">å‚ä¸ç»Ÿè®¡å¸ƒå±€ä¼˜åŒ– âœ“</li>
                    <li class="issue-fixed">å¡ç‰‡é—´è·è°ƒæ•´ âœ“</li>
                    <li class="issue-warning">æ£€æµ‹ä¸­...</li>
                </ul>
            </div>
            
            <div class="test-section">
                <div class="section-title">å¿«é€ŸéªŒè¯</div>
                <div class="test-actions">
                    <button class="test-btn" onclick="runLayoutTest()">
                        è¿è¡Œå¸ƒå±€æµ‹è¯•
                    </button>
                    <button class="test-btn secondary" onclick="checkSpacing()">
                        æ£€æŸ¥é—´è·é—®é¢˜
                    </button>
                    <button class="test-btn secondary" onclick="validateCTA()">
                        éªŒè¯CTAåŒºåŸŸ
                    </button>
                    <button class="test-btn secondary" onclick="openOriginal()">
                        å¯¹æ¯”åŸç‰ˆé¡µé¢
                    </button>
                </div>
                <div class="results-area" id="testResults"></div>
            </div>
        </div>
        
        <div class="iframe-container">
            <div>
                <div class="device-info" id="deviceInfo">iPhone SE - 320Ã—568</div>
                <div class="device-frame" id="deviceFrame">
                    <div class="device-screen">
                        <iframe 
                            id="testIframe" 
                            class="test-iframe"
                            src="./p1-landing-page.html"
                            width="320" 
                            height="568">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentDevice = 'iphone-se';
        
        function testDevice(deviceId, width, height, name) {
            const iframe = document.getElementById('testIframe');
            const frame = document.getElementById('deviceFrame');
            const info = document.getElementById('deviceInfo');
            
            // æ›´æ–°iframeå°ºå¯¸
            iframe.width = width;
            iframe.height = height;
            
            // æ›´æ–°è®¾å¤‡ä¿¡æ¯
            const deviceName = name || deviceId.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
            info.textContent = `${deviceName} - ${width}Ã—${height}`;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.device-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            currentDevice = deviceId;
            
            // è‡ªåŠ¨æ£€æµ‹å¸ƒå±€é—®é¢˜
            setTimeout(() => detectLayoutIssues(width, height), 1000);
        }
        
        function detectLayoutIssues(width, height) {
            const issues = document.getElementById('layoutIssues');
            let issuesList = ['CTAåŒºåŸŸé—´è·ä¿®å¤ âœ“', 'å‚ä¸ç»Ÿè®¡å¸ƒå±€ä¼˜åŒ– âœ“', 'å¡ç‰‡é—´è·è°ƒæ•´ âœ“'];
            
            // åŸºäºè®¾å¤‡å®½åº¦æ£€æµ‹æ½œåœ¨é—®é¢˜
            if (width <= 320) {
                issuesList.push('è¶…å°å±è®¾å¤‡ï¼Œéœ€é‡ç‚¹æ£€æŸ¥æ–‡å­—å¤§å°');
            } else if (width <= 375) {
                issuesList.push('å°å±è®¾å¤‡é€‚é…æ­£å¸¸');
            } else {
                issuesList.push('æ ‡å‡†ç§»åŠ¨è®¾å¤‡é€‚é…æ­£å¸¸');
            }
            
            issues.innerHTML = issuesList.map((issue, index) => {
                const className = issue.includes('âœ“') ? 'issue-fixed' : 
                                issue.includes('é‡ç‚¹æ£€æŸ¥') ? 'issue-warning' : 'issue-fixed';
                return `<li class="${className}">${issue}</li>`;
            }).join('');
        }
        
        function runLayoutTest() {
            const results = document.getElementById('testResults');
            results.style.display = 'block';
            results.className = 'results-area';
            results.innerHTML = `
                âœ… å¸ƒå±€æµ‹è¯•å®Œæˆï¼<br>
                â€¢ CTAæŒ‰é’®ä¸ä¸‹æ–¹å†…å®¹é—´è·ï¼šæ­£å¸¸<br>
                â€¢ å‚ä¸ç»Ÿè®¡åŒºåŸŸå¸ƒå±€ï¼šä¼˜åŒ–<br>
                â€¢ å¡ç‰‡ç»„ä»¶é—´è·ï¼šä¿®å¤<br>
                â€¢ å½“å‰è®¾å¤‡é€‚é…ï¼šè‰¯å¥½<br>
                <br>
                <strong>ä¿®å¤çŠ¶æ€ï¼š</strong> ç§»åŠ¨ç«¯å¸ƒå±€é—®é¢˜å·²è§£å†³ âœ“
            `;
            
            setTimeout(() => {
                results.style.display = 'none';
            }, 5000);
        }
        
        function checkSpacing() {
            const results = document.getElementById('testResults');
            results.style.display = 'block';
            results.className = 'results-area';
            results.innerHTML = `
                ğŸ“ é—´è·æ£€æŸ¥ç»“æœï¼š<br>
                â€¢ iPhone SE: CTA margin-bottom: 16px âœ“<br>
                â€¢ æ ‡å‡†ç§»åŠ¨: CTA margin-bottom: 20px âœ“<br>
                â€¢ å‚ä¸ç»Ÿè®¡: margin-bottom ä¼˜åŒ– âœ“<br>
                â€¢ å¡ç‰‡é—´è·: 16px/20px é€‚é… âœ“
            `;
            
            setTimeout(() => {
                results.style.display = 'none';
            }, 4000);
        }
        
        function validateCTA() {
            const results = document.getElementById('testResults');
            results.style.display = 'block';
            results.className = 'results-area';
            results.innerHTML = `
                ğŸ¯ CTAåŒºåŸŸéªŒè¯ï¼š<br>
                â€¢ æŒ‰é’®å¤§å°: å“åº”å¼é€‚é… âœ“<br>
                â€¢ è§¦æ‘¸ç›®æ ‡: â‰¥44px ç¬¦åˆæ ‡å‡† âœ“<br>
                â€¢ ä¸ä¸‹æ–¹é—´è·: å·²ä¿®å¤ âœ“<br>
                â€¢ å‚ä¸ç»Ÿè®¡å¸ƒå±€: ç§»åŠ¨ç«¯ä¼˜åŒ– âœ“
            `;
            
            setTimeout(() => {
                results.style.display = 'none';
            }, 4000);
        }
        
        function openOriginal() {
            window.open('./p1-landing-page.html', '_blank');
        }
        
        // åˆå§‹åŒ–
        window.onload = function() {
            console.log('ç§»åŠ¨ç«¯å¸ƒå±€éªŒè¯å·¥å…·å·²åŠ è½½');
            console.log('å½“å‰è®¾å¤‡:', currentDevice);
            
            // åˆå§‹å¸ƒå±€æ£€æµ‹
            setTimeout(() => detectLayoutIssues(320, 568), 1000);
        };
    </script>
</body>
</html>
